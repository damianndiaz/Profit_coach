"""
Sistema de Entrenamiento H√≠brido ProFit Coach
Metodolog√≠a que combina ejercicios tradicionales con innovaciones funcionales
Principios de variabilidad y creatividad para rutinas √∫nicas
"""

# ================================
# üéØ PRINCIPIOS DE ENTRENAMIENTO H√çBRIDO
# ================================

TRAINING_PRINCIPLES = {
    "variabilidad": {
        "concepto": "Nunca repetir rutinas id√©nticas - siempre variar algo",
        "estrategias": [
            "Cambiar planos de movimiento",
            "Modificar implementos",
            "Alterar rangos de repeticiones",
            "Variar tiempos de descanso",
            "Combinar patrones de movimiento"
        ]
    },
    
    "hibridacion": {
        "concepto": "Combinar ejercicios tradicionales con innovaciones funcionales",
        "enfoque": [
            "Ejercicios tradicionales como base s√≥lida",
            "Variaciones funcionales para transferencia",
            "Movimientos espec√≠ficos del deporte",
            "Elementos creativos para motivaci√≥n",
            "Progresiones naturales entre m√©todos"
        ]
    },
    
    "especificidad": {
        "concepto": "Adaptar seg√∫n deporte, nivel y objetivos espec√≠ficos",
        "factores": [
            "Demandas energ√©ticas del deporte",
            "Patrones de movimiento caracter√≠sticos", 
            "Nivel de experiencia del atleta",
            "Equipamiento disponible",
            "Fase de la temporada"
        ]
    }
}

# ================================
# üèóÔ∏è ESTRUCTURA METODOL√ìGICA PROFESIONAL
# ================================

ROUTINE_METHODOLOGY = {
    "bloque_1": {
        "nombre": "Activaci√≥n Gl√∫tea",
        "enfoque": "Activaci√≥n espec√≠fica del complejo gl√∫teo y estabilizadores",
        "principios": [
            "Activaci√≥n selectiva de gl√∫teo medio y mayor",
            "Estabilizaci√≥n de pelvis y caderas",
            "Preparaci√≥n para movimientos complejos",
            "Correcci√≥n de inhibiciones musculares"
        ],
        "categorias": ["activacion_glutea", "estabilizacion_pelvica", "movilidad_cadera"]
    },
    
    "bloque_2": {
        "nombre": "Din√°mico/Potencia/Diagonales/Zona Media",
        "enfoque": "Adaptable seg√∫n objetivo del deportista - potencia, movimientos diagonales o zona media",
        "principios": [
            "Selecci√≥n seg√∫n necesidades espec√≠ficas del atleta",
            "Movimientos multiplanares y funcionales",
            "Transferencia directa al gesto deportivo",
            "Progresi√≥n en complejidad y velocidad"
        ],
        "categorias": ["potencia_explosiva", "movimientos_diagonales", "zona_media_dinamica", "coordinacion"]
    },
    
    "bloque_3": {
        "nombre": "Fuerza 1",
        "enfoque": "Primer bloque de fuerza funcional - patrones fundamentales",
        "principios": [
            "Patrones b√°sicos de empuje y tracci√≥n",
            "Movimientos unilaterales y bilaterales",
            "Combinaci√≥n tradicional-funcional",
            "Base s√≥lida para progresiones"
        ],
        "categorias": ["fuerza_fundamental", "patrones_basicos", "unilaterales"]
    },
    
    "bloque_4": {
        "nombre": "Fuerza 2", 
        "enfoque": "Segundo bloque de fuerza funcional - patrones complejos y combinados",
        "principios": [
            "Movimientos combinados multiarticulares",
            "Patrones asim√©tricos y rotacionales",
            "Mayor complejidad coordinativa",
            "Transferencia espec√≠fica al deporte"
        ],
        "categorias": ["fuerza_compleja", "movimientos_combinados", "transferencia_deportiva"]
    },
    
    "bloque_5": {
        "nombre": "Contraste/Preventivos/RSA",
        "enfoque": "Trabajo de contraste, prevenci√≥n de lesiones y acondicionamiento espec√≠fico",
        "principios": [
            "Contraste entre fuerza y velocidad",
            "Ejercicios preventivos espec√≠ficos",
            "RSA (Repeated Sprint Ability) seg√∫n deporte",
            "Optimizaci√≥n de la recuperaci√≥n"
        ],
        "categorias": ["contraste_velocidad", "prevencion_lesiones", "RSA_especifico", "recuperacion"]
    },
    
    "alternativa_circuito": {
        "nombre": "Circuito Integral de 6 Ejercicios",
        "enfoque": "Reemplaza Fuerza 1 y Fuerza 2 por un circuito que integra todas las capacidades",
        "formato": "6 ejercicios x 5 series",
        "principios": [
            "Integraci√≥n de fuerza, potencia, velocidad y zona media",
            "Variabilidad constante en ejercicios",
            "Eficiencia temporal m√°xima",
            "Est√≠mulo completo en un solo bloque"
        ],
        "categorias": ["circuito_integral", "capacidades_mixtas", "eficiencia_temporal"]
    }
}

# ================================
# üé® CATEGOR√çAS DE EJERCICIOS (SIN LISTAS FIJAS)
# ================================

EXERCISE_CATEGORIES = {
    "patrones_fundamentales": {
        "descripcion": "Movimientos b√°sicos que todo atleta debe dominar",
        "tipos": ["empuje", "traccion", "sentadilla", "bisagra_cadera", "locomocion", "rotacion"],
        "variabilidad": "Desde versiones b√°sicas hasta progresiones complejas"
    },
    
    "movimientos_funcionales": {
        "descripcion": "Ejercicios que imitan patrones naturales de movimiento",
        "tipos": ["animales", "combos_multiplanares", "unilaterales", "asimetricos"],
        "variabilidad": "Infinitas combinaciones y progresiones posibles"
    },
    
    "especificos_deporte": {
        "descripcion": "Movimientos directamente relacionados con el deporte",
        "tipos": ["gestos_tecnicos", "situaciones_juego", "capacidades_especificas"],
        "variabilidad": "Completamente personalizable seg√∫n el deporte"
    },
    
    "metodos_avanzados": {
        "descripcion": "T√©cnicas de entrenamiento especializadas",
        "tipos": ["pliometria", "contrastes", "complejos", "circuitos", "intervalos"],
        "variabilidad": "Par√°metros modificables infinitamente"
    }
}

# ================================
# üèÉ‚Äç‚ôÇÔ∏è ADAPTACIONES POR DEPORTE (PRINCIPIOS)
# ================================

SPORT_ADAPTATION_PRINCIPLES = {
    "deportes_intermitentes": {
        "ejemplos": ["futbol", "rugby", "basquet", "hockey"],
        "enfoque": [
            "Capacidad de repetir esfuerzos de alta intensidad",
            "Cambios de direcci√≥n explosivos",
            "Toma de decisiones r√°pidas",
            "Resistencia a la velocidad espec√≠fica"
        ]
    },
    
    "deportes_ciclicos": {
        "ejemplos": ["natacion", "ciclismo", "remo", "atletismo_fondo"],
        "enfoque": [
            "Eficiencia t√©cnica bajo fatiga",
            "Desarrollo de sistemas energ√©ticos espec√≠ficos",
            "Econom√≠a de movimiento",
            "Periodizaci√≥n de cargas"
        ]
    },
    
    "deportes_precision": {
        "ejemplos": ["tenis", "golf", "tiro", "arqueria"],
        "enfoque": [
            "Control motor fino",
            "Estabilidad bajo presi√≥n",
            "Concentraci√≥n prolongada",
            "Precisi√≥n t√©cnica"
        ]
    },
    
    "deportes_combate": {
        "ejemplos": ["boxeo", "artes_marciales", "lucha"],
        "enfoque": [
            "Potencia explosiva multidireccional",
            "Resistencia anaer√≥bica",
            "Agilidad reactiva",
            "Adaptabilidad t√°ctica"
        ]
    }
}

# ================================
# üìä GU√çAS DE PROGRESI√ìN POR NIVEL
# ================================

PROGRESSION_GUIDELINES = {
    "principiante": {
        "filosofia": "Construcci√≥n de base s√≥lida con √©nfasis en t√©cnica",
        "metodos_preferidos": ["ejercicios_tradicionales_basicos", "progresiones_controladas"],
        "innovacion": "Introducir gradualmente elementos funcionales simples",
        "parametros": {"volumen": "bajo-moderado", "intensidad": "controlada", "complejidad": "simple"}
    },
    
    "intermedio": {
        "filosofia": "Desarrollo de capacidades con mayor variabilidad",
        "metodos_preferidos": ["hibrido_tradicional_funcional", "progresiones_moderadas"],
        "innovacion": "Combinar sistem√°ticamente tradicional con funcional",
        "parametros": {"volumen": "moderado", "intensidad": "variable", "complejidad": "moderada"}
    },
    
    "avanzado": {
        "filosofia": "Optimizaci√≥n del rendimiento con especificidad alta",
        "metodos_preferidos": ["metodos_avanzados", "especificidad_alta"],
        "innovacion": "Crear combinaciones √∫nicas seg√∫n necesidades",
        "parametros": {"volumen": "alto", "intensidad": "alta", "complejidad": "compleja"}
    },
    
    "elite": {
        "filosofia": "Individualizaci√≥n total y periodizaci√≥n sofisticada",
        "metodos_preferidos": ["completamente_personalizado", "innovacion_constante"],
        "innovacion": "Desarrollo de m√©todos √∫nicos para el atleta",
        "parametros": {"volumen": "variable", "intensidad": "m√°xima", "complejidad": "muy_compleja"}
    }
}

# ================================
# üéØ PRINCIPIOS DE CREATIVIDAD INTELIGENTE
# ================================

CREATIVITY_PRINCIPLES = {
    "variacion_sistematica": {
        "concepto": "Cambiar elementos manteniendo objetivos",
        "estrategias": [
            "Modificar un solo elemento por sesi√≥n",
            "Alternar entre tradicional e innovador",
            "Progresar de simple a complejo",
            "Adaptar seg√∫n respuesta del atleta"
        ]
    },
    
    "combinacion_inteligente": {
        "concepto": "Fusionar ejercicios de manera l√≥gica",
        "criterios": [
            "Compatibilidad biomec√°nica",
            "Progresi√≥n l√≥gica de dificultad",
            "Transferencia al deporte",
            "Factibilidad pr√°ctica"
        ]
    },
    
    "individualizacion": {
        "concepto": "Personalizar seg√∫n el atleta espec√≠fico",
        "factores": [
            "Historial de lesiones",
            "Preferencias personales",
            "Respuesta al entrenamiento",
            "Contexto situacional"
        ]
    }
}

# ================================
# üèÉ‚Äç‚ôÇÔ∏è RUTINAS ESPEC√çFICAS POR DEPORTE
# ================================

SPORT_SPECIFIC_ROUTINES = {
    "futbol": {
        "activacion": [
            "Foam rolling + movilidad articular espec√≠fica",
            "Activaci√≥n gl√∫tea x3 + core din√°mico",
            "Movimientos bal√≠sticos progresivos",
            "Cambios de direcci√≥n a baja intensidad"
        ],
        "potencia": [
            "Salidas explosivas desde diferentes posiciones",
            "Sprints multidireccionales 15-20m",
            "Saltos reactivos + aterrizaje controlado",
            "Trabajo pliom√©trico lateral"
        ],
        "especifico": [
            "Situaciones 1v1 t√©cnico-t√°cticas",
            "Remates con salto bajo fatiga",
            "Control + pase bajo presi√≥n temporal",
            "Jugadas a√©reas espec√≠ficas"
        ],
        "metabolico": [
            "RSA f√∫tbol: 6x30m (15'' trabajo / 45'' pausa)",
            "Circuito t√©cnico-f√≠sico espec√≠fico",
            "Intervalos variables (alta-media intensidad)",
            "Finisher: sprints con cambio de direcci√≥n"
        ]
    },
    
    "rugby": {
        "activacion": [
            "Movilidad din√°mica completa",
            "Contactos progresivos controlados", 
            "Aceleraciones cortas espec√≠ficas",
            "Activaci√≥n sistema neuromuscular"
        ],
        "potencia": [
            "Empujes explosivos (scrum simulation)",
            "Saltos pliom√©tricos multidireccionales",
            "Sprints con resistencia (sled/paraca√≠das)",
            "Trabajo de contacto explosivo"
        ],
        "especifico": [
            "T√©cnica de tackleo progresivo",
            "Situaciones de ruck espec√≠ficas",
            "Line-out jumps con precisi√≥n",
            "Manejo de bal√≥n bajo contacto"
        ],
        "metabolico": [
            "RSA rugby: 8''x24'' x (2-3') pausa",
            "Circuitos de contacto + sprint",
            "Intervalos espec√≠ficos del juego",
            "Trabajo de resistencia explosiva"
        ]
    },
    
    "tenis": {
        "activacion": [
            "Sombras t√©cnicas din√°micas",
            "Desplazamientos laterales espec√≠ficos",
            "Rotaciones din√°micas de tronco",
            "Activaci√≥n cadena cin√©tica del golpe"
        ],
        "potencia": [
            "Golpes explosivos con implementos",
            "Saltos reactivos multidireccionales",
            "Cambios de direcci√≥n espec√≠ficos",
            "Trabajo pliom√©trico de tren superior"
        ],
        "especifico": [
            "Voleas bajo presi√≥n temporal",
            "Servicios t√©cnicos con potencia",
            "Recuperaciones r√°pidas en cancha",
            "Situaciones de punto espec√≠ficas"
        ],
        "metabolico": [
            "Intervalos tipo set de tenis",
            "Circuitos t√©cnico-f√≠sicos",
            "RSA espec√≠fico de tenis (15-45seg)",
            "Trabajo de resistencia a la velocidad"
        ]
    },
    
    "natacion": {
        "activacion": [
            "Movilidad espec√≠fica de hombros",
            "Activaci√≥n escapular progresiva",
            "Coordinaci√≥n brazada en seco",
            "Preparaci√≥n sistema respiratorio"
        ],
        "potencia": [
            "Pull-ups explosivos espec√≠ficos",
            "Empujes acu√°ticos simulados",
            "Patadas potentes fuera del agua",
            "Trabajo de rotaci√≥n de tronco"
        ],
        "especifico": [
            "T√©cnica respiraci√≥n espec√≠fica",
            "Virajes explosivos simulados",
            "Salidas desde plataforma",
            "Brazadas espec√≠ficas por estilo"
        ],
        "metabolico": [
            "Intervalos espec√≠ficos por distancia",
            "Sets de velocidad progresiva",
            "Trabajo de umbral espec√≠fico",
            "Recuperaci√≥n activa dirigida"
        ]
    },
    
    "atletismo": {
        "activacion": [
            "Educativos de carrera espec√≠ficos",
            "Activaci√≥n neuromuscular progresiva",
            "Movilidad din√°mica de caderas",
            "Preparaci√≥n biomec√°nica espec√≠fica"
        ],
        "potencia": [
            "Aceleraciones progresivas espec√≠ficas",
            "Saltos t√©cnicos por especialidad",
            "Ejercicios de frecuencia de paso",
            "Trabajo de amplitud espec√≠fica"
        ],
        "especifico": [
            "T√©cnica espec√≠fica por prueba",
            "Simulaci√≥n de competencia",
            "Trabajo de ritmo espec√≠fico",
            "Transferencia t√©cnica directa"
        ],
        "metabolico": [
            "Intervalos espec√≠ficos por distancia",
            "Fartlek espec√≠fico del evento",
            "Tempo runs controlados",
            "Recuperaci√≥n metab√≥lica dirigida"
        ]
    }
}

# ================================
# üéØ M√âTODOS DE ENTRENAMIENTO ESPEC√çFICOS
# ================================

TRAINING_METHODS = {
    "rsa_protocols": {
        "definicion": "Repeated Sprint Ability - Capacidad de repetir sprints",
        "protocolos": [
            "F√∫tbol: 6x30m (15'' trabajo / 45'' pausa) x 3 series",
            "Rugby: 8''x24'' x (2-3') pausa entre series",
            "B√°squet: 6x15m (10'' trabajo / 50'' pausa) x 4 series",
            "Tenis: 15''x45'' modalidad espec√≠fica del deporte"
        ]
    },
    
    "circuitos_metabolicos": {
        "definicion": "Circuitos de alta intensidad espec√≠ficos",
        "formatos": [
            "EMOM (Every Minute On the Minute): 1 ejercicio/min",
            "Tabata modificado: 20''ON/10''OFF x 8 rounds",
            "Circuito 5x series: 30-45seg trabajo/15-30seg pausa",
            "Escalera ascendente: 1-2-3-4-5 repeticiones"
        ]
    },
    
    "complejos_franceses": {
        "definicion": "Fuerza + Potencia + Velocidad en secuencia",
        "ejemplos": [
            "Sentadilla pesada + Salto al caj√≥n + Sprint 20m",
            "Press banca + Flexiones explosivas + Lanzamiento bal√≥n",
            "Peso muerto + Saltos reactivos + Aceleraci√≥n",
            "Dominadas + Lanzamientos + Movimientos espec√≠ficos"
        ]
    },
    
    "entrenamiento_contraste": {
        "definicion": "Alternancia entre cargas pesadas y explosivas",
        "protocolos": [
            "Carga pesada (85-95%) + Ejercicio explosivo",
            "3-5 min pausa entre m√©todos",
            "4-6 series por complejo",
            "Aplicaci√≥n espec√≠fica al gesto deportivo"
        ]
    }
}

# ================================
# üèãÔ∏è‚Äç‚ôÇÔ∏è IMPLEMENTOS Y EQUIPAMIENTO
# ================================

EQUIPMENT_VARIATIONS = {
    "sin_equipamiento": [
        "Movimientos animales complejos",
        "Ejercicios isom√©tricos progresivos",
        "Pliometr√≠a corporal avanzada",
        "Patrones de movimiento funcional",
        "Trabajo de movilidad din√°mica"
    ],
    
    "equipamiento_basico": [
        "Bandas el√°sticas multifuncionales",
        "Balones medicinales variables",
        "TRX o sistemas de suspensi√≥n",
        "Conos y escaleras de agilidad",
        "Foam roller y pelotas lacrosse"
    ],
    
    "equipamiento_avanzado": [
        "Kettlebells de diferentes pesos",
        "Barras ol√≠mpicas y discos",
        "Cajones pliom√©tricos variables",
        "Sleds y paraca√≠das de resistencia",
        "Sistemas de poleas multifuncionales"
    ],
    
    "implementos_especificos": [
        "Implementos espec√≠ficos del deporte",
        "Balones por especialidad deportiva",
        "Raquetas/palos seg√∫n deporte",
        "Equipamiento t√©cnico espec√≠fico",
        "Simuladores de gestos deportivos"
    ]
}

# ================================
# üìä NIVELES DE PROGRESI√ìN
# ================================

PROGRESSION_LEVELS = {
    "principiante": {
        "enfoque": "Aprendizaje de patrones b√°sicos + acondicionamiento general",
        "volumen": "2-3 entrenamientos/semana",
        "intensidad": "60-75% de capacidad m√°xima",
        "complejidad": "Ejercicios b√°sicos con supervisi√≥n"
    },
    
    "intermedio": {
        "enfoque": "Desarrollo de capacidades espec√≠ficas + introducci√≥n t√©cnica",
        "volumen": "3-4 entrenamientos/semana",
        "intensidad": "70-85% de capacidad m√°xima", 
        "complejidad": "Ejercicios combinados + elementos espec√≠ficos"
    },
    
    "avanzado": {
        "enfoque": "Optimizaci√≥n del rendimiento + especificidad alta",
        "volumen": "4-5 entrenamientos/semana",
        "intensidad": "80-95% de capacidad m√°xima",
        "complejidad": "Ejercicios complejos + transferencia directa"
    },
    
    "semi_profesional": {
        "enfoque": "Periodizaci√≥n espec√≠fica + picos de rendimiento",
        "volumen": "5-6 entrenamientos/semana",
        "intensidad": "85-100% de capacidad m√°xima",
        "complejidad": "Entrenamientos espec√≠ficos + competencia"
    },
    
    "elite": {
        "enfoque": "Rendimiento m√°ximo + individualizaci√≥n total",
        "volumen": "6+ entrenamientos/semana",
        "intensidad": "Variable seg√∫n periodizaci√≥n",
        "complejidad": "Completamente espec√≠fico + innovaci√≥n constante"
    }
}

# ================================
# üé® GENERADOR DE RUTINAS CREATIVAS
# ================================

TRAINING_METHODS = {
    "principiante": {
        "enfoque": "T√©cnica y estabilidad",
        "metodos": ["circuitos b√°sicos", "progresiones controladas", "tiempo bajo tensi√≥n"],
        "intensidad": "60-70% RPE 6-7"
    },
    "intermedio": {
        "enfoque": "Progresi√≥n y variabilidad", 
        "metodos": ["complejos de fuerza", "contrastes", "periodizaci√≥n ondulatoria"],
        "intensidad": "70-85% RPE 7-8"
    },
    "avanzado": {
        "enfoque": "Especificidad y rendimiento m√°ximo",
        "metodos": ["CAT", "clusters", "franc√©s", "b√∫lgaro", "westside"],
        "intensidad": "85-95% RPE 8-9"
    },
    "elite": {
        "enfoque": "Periodizaci√≥n compleja y transferencia",
        "metodos": ["VBT", "periodizaci√≥n conjugada", "potenciaci√≥n post-activaci√≥n"],
        "intensidad": "Variable seg√∫n fase"
    }
}

CREATIVE_COMBINATIONS = [
    "Ejercicio + salto reactivo",
    "Movimiento unilateral + rotaci√≥n",
    "Fuerza + componente cognitivo",
    "Isom√©trico + explosivo",
    "Cadena abierta + cerrada",
    "Plano sagital + frontal + transversal",
    "Equipamiento combinado",
    "Tempo variable + pausa"
]

# ================================
# üé® FUNCIONES DE GENERACI√ìN INTELIGENTE
# ================================

def generate_hybrid_routine(sport, level, equipment="basico", focus="integral"):
    """
    Genera una rutina h√≠brida basada en principios, no en listas fijas
    Combina ejercicios tradicionales con innovaciones funcionales
    
    Args:
        sport: Deporte espec√≠fico
        level: Nivel del atleta
        equipment: Equipamiento disponible
        focus: Enfoque del entrenamiento
    
    Returns:
        Dict con metodolog√≠a estructurada (sin ejercicios espec√≠ficos)
    """
    
    # Obtener principios seg√∫n el deporte
    sport_principles = get_sport_adaptation_principles(sport)
    level_guidelines = get_progression_guidelines(level)
    
    routine_framework = {
        "info": {
            "deporte": sport,
            "nivel": level,
            "enfoque_metodologico": focus,
            "duracion_total": "90-120 minutos"
        },
        "metodologia": {},
        "principios_aplicados": sport_principles,
        "guias_nivel": level_guidelines
    }
    
    # Generar framework metodol√≥gico por bloques
    for bloque_key, bloque_info in ROUTINE_METHODOLOGY.items():
        routine_framework["metodologia"][bloque_key] = {
            "nombre": bloque_info["nombre"],
            "duracion": bloque_info["duracion"],
            "principios": bloque_info["principios"],
            "categorias_sugeridas": bloque_info["categorias"],
            "adaptacion_nivel": level_guidelines["parametros"],
            "enfoque_deporte": sport_principles["enfoque"][:2]  # Primeros 2 enfoques
        }
    
    return routine_framework

def get_sport_adaptation_principles(sport):
    """Obtiene principios de adaptaci√≥n seg√∫n el tipo de deporte"""
    sport_lower = sport.lower()
    
    # Clasificar deporte por tipo
    for category, data in SPORT_ADAPTATION_PRINCIPLES.items():
        for example_sport in data["ejemplos"]:
            if example_sport in sport_lower:
                return data
    
    # Default para deportes no clasificados
    return SPORT_ADAPTATION_PRINCIPLES["deportes_intermitentes"]

def get_progression_guidelines(level):
    """Obtiene gu√≠as de progresi√≥n seg√∫n el nivel"""
    level_lower = level.lower().replace(" ", "_")
    return PROGRESSION_GUIDELINES.get(level_lower, PROGRESSION_GUIDELINES["intermedio"])

def get_creativity_strategies():
    """Obtiene estrategias de creatividad para variar entrenamientos"""
    return CREATIVITY_PRINCIPLES

def get_exercise_categories():
    """Obtiene categor√≠as de ejercicios para guiar la selecci√≥n"""
    return EXERCISE_CATEGORIES

def generate_variation_suggestions(base_category, level):
    """
    Genera sugerencias de variaci√≥n sin dar ejercicios espec√≠ficos
    
    Args:
        base_category: Categor√≠a base del ejercicio
        level: Nivel del atleta
    
    Returns:
        Dict con principios de variaci√≥n
    """
    
    guidelines = get_progression_guidelines(level)
    
    suggestions = {
        "categoria_base": base_category,
        "nivel": level,
        "principios_variacion": CREATIVITY_PRINCIPLES["variacion_sistematica"]["estrategias"],
        "metodos_preferidos": guidelines["metodos_preferidos"],
        "parametros_recomendados": guidelines["parametros"],
        "filosofia": guidelines["filosofia"]
    }
    
    return suggestions

def customize_methodology_for_athlete(base_methodology, athlete_info):
    """
    Personaliza la metodolog√≠a seg√∫n informaci√≥n espec√≠fica del atleta
    
    Args:
        base_methodology: Metodolog√≠a base generada
        athlete_info: Informaci√≥n del atleta
    
    Returns:
        Metodolog√≠a personalizada
    """
    customized = base_methodology.copy()
    
    # Personalizaci√≥n seg√∫n objetivos
    if athlete_info.get("objetivos"):
        customized["personalizacion"] = {
            "objetivos_especificos": athlete_info["objetivos"],
            "adaptaciones_sugeridas": "Enfatizar bloques relacionados con objetivos",
            "progresion": "Ajustar intensidad seg√∫n respuesta individual"
        }
    
    # Consideraciones especiales
    if athlete_info.get("limitaciones"):
        customized["consideraciones_especiales"] = {
            "limitaciones": athlete_info["limitaciones"],
            "adaptaciones": "Modificar ejercicios seg√∫n limitaciones",
            "alternativas": "Usar categor√≠as compatibles"
        }
    
    return customized

# ================================
# üîß FUNCIONES DE COMPATIBILIDAD
# ================================

def get_training_method_examples(method_type="hybrid_approach"):
    """Obtiene ejemplos de m√©todos de entrenamiento"""
    if method_type in TRAINING_METHODS:
        return TRAINING_METHODS[method_type]
    return {"enfoque": "Enfoque h√≠brido inteligente", "metodos": ["variabilidad_sistematica"]}

def get_equipment_guidelines(equipment_type="basico"):
    """Obtiene gu√≠as para diferentes tipos de equipamiento"""
    equipment_guidelines = {
        "sin_equipamiento": {
            "enfoque": "Maximizar ejercicios de peso corporal",
            "categorias_preferidas": ["patrones_fundamentales", "movimientos_funcionales"]
        },
        "basico": {
            "enfoque": "Combinar peso corporal con implementos simples",
            "categorias_preferidas": ["hibrido_tradicional_funcional"]
        },
        "avanzado": {
            "enfoque": "Utilizar toda la gama de equipamiento disponible",
            "categorias_preferidas": ["metodos_avanzados", "especificos_deporte"]
        }
    }
    
    return equipment_guidelines.get(equipment_type, equipment_guidelines["basico"])

def generate_weekly_methodology(sport, level, sessions_per_week=4):
    """
    Genera metodolog√≠a semanal basada en principios
    
    Args:
        sport: Deporte espec√≠fico
        level: Nivel del atleta
        sessions_per_week: N√∫mero de sesiones por semana
    
    Returns:
        Dict con estructura metodol√≥gica semanal
    """
    level_data = get_progression_guidelines(level)
    sport_data = get_sport_adaptation_principles(sport)
    
    weekly_methodology = {
        "sesiones_semanales": sessions_per_week,
        "filosofia_nivel": level_data["filosofia"],
        "enfoque_deporte": sport_data["enfoque"][0],
        "distribucion_metodologica": {}
    }
    
    # Distribuci√≥n metodol√≥gica seg√∫n n√∫mero de sesiones
    if sessions_per_week <= 2:
        weekly_methodology["distribucion_metodologica"] = {
            "Sesi√≥n 1": {
                "enfoque": "Desarrollo integral",
                "bloques": ["activacion", "principal_fuerza", "integracion"],
                "filosofia": "Combinar tradicional con funcional"
            },
            "Sesi√≥n 2": {
                "enfoque": "Acondicionamiento espec√≠fico",
                "bloques": ["activacion", "principal_metabolico", "especifico"],
                "filosofia": "Enfasis en capacidades espec√≠ficas del deporte"
            }
        }
    elif sessions_per_week == 3:
        weekly_methodology["distribucion_metodologica"] = {
            "Sesi√≥n 1": {
                "enfoque": "Fuerza y potencia",
                "bloques": ["activacion", "principal_fuerza", "finalizacion"],
                "filosofia": "Base tradicional con elementos funcionales"
            },
            "Sesi√≥n 2": {
                "enfoque": "Espec√≠fico del deporte",
                "bloques": ["activacion_especifica", "integracion", "aplicacion"],
                "filosofia": "Transferencia directa al rendimiento"
            },
            "Sesi√≥n 3": {
                "enfoque": "Acondicionamiento y prevenci√≥n",
                "bloques": ["movilidad", "metabolico", "prevencion"],
                "filosofia": "Mantenimiento y regeneraci√≥n"
            }
        }
    else:  # 4+ sesiones
        weekly_methodology["distribucion_metodologica"] = {
            "Principio_general": "Distribuci√≥n equilibrada entre todos los m√©todos",
            "Variabilidad": "Rotar entre enfoques tradicionales e innovadores",
            "Progresion": "Aumentar complejidad progresivamente",
            "Individualizacion": "Adaptar seg√∫n respuesta del atleta"
        }
    
    return weekly_methodology
